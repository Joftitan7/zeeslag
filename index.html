<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Winkelmandje</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
<div class="fluid-container">
    <div class="row">
        <div class="col-6">
            <h1>Producten ingeven</h1>
            <form id="productForm">
                <div class="form-group">
                    <label for="productName">Productnaam:</label>
                    <input type="text" class="form-control" id="productName" required>
                </div>
                <div class="form-group">
                    <label for="productQuantity">Aantal:</label>
                    <input type="number" class="form-control" id="productQuantity" required>
                </div>
                <div class="form-group">
                    <label for="productPrice">Prijs per product:</label>
                    <input type="number" class="form-control" id="productPrice" required>
                </div>
                <button type="submit" class="btn btn-primary">Toevoegen</button>
                <p id="add-cart-error" class="error"></p>
            </form>

            <h1 class="mt-5">Product verwijderen</h1>
            <form id="removeProductForm">
                <div class="form-group">
                    <label for="removeProductName">Productnaam:</label>
                    <input type="text" class="form-control" id="removeProductName" required>
                </div>
                <button type="submit" class="btn btn-danger">Verwijderen</button>
                <p id="remove-cart-error" class="error"></p>
            </form>
        </div>
        <div class="col-6">
            <h1>Kortingsbon ingeven</h1>
            <form id="couponForm">
                <div class="form-group">
                    <label for="couponCode">Kortingscode:</label>
                    <input type="text" class="form-control" id="couponCode">
                </div>
                <button type="submit" class="btn btn-primary">Toepassen</button>
            </form>

            <h1 class="mt-5">Winkelmandje</h1>
            <div id="cartDetails" class="mt-3">
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th>Productnaam</th>
                        <th>Aantal</th>
                        <th>Prijs per product</th>
                        <th>Totaalprijs</th>
                    </tr>
                    </thead>
                    <tbody id="cartTableBody">
                    <!-- template slot -->
                    </tbody>
                    <tfoot>
                    <tr>
                        <td colspan="3">Korting</td>
                        <td id="discount">0 &euro;</td>
                    </tr>
                    <tr>
                        <td colspan="3">BTW (21%)</td>
                        <td id="vat">0 &euro;</td>
                    </tr>
                    <tr>
                        <td colspan="3"><strong>Totaal</strong></td>
                        <td id="total">0 &euro;</td>
                    </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</div>

<script src="index.js"></script>
<script>
    let cart = [];
    let coupon = 0;

    function updateCartDetailsDom(cart) {
        let details = updateCartDetails(cart, coupon);

        let cartTableBody = document.querySelector('#cartTableBody');
        cartTableBody.innerHTML = '';

        cart.forEach(product => {
            let row = `<tr>
                            <td>${product.name}</td>
                            <td>${product.quantity}</td>
                            <td>${product.price} &euro;</td>
                            <td>${product.total} &euro;</td>
                        </tr>`;
            cartTableBody.innerHTML += row;
        });

        document.querySelector('#discount').innerHTML = details.discount;
        document.querySelector('#vat').innerHTML = details.vat;
        document.querySelector('#total').innerHTML = details.total;
    }

    document.querySelector('#productForm').addEventListener('submit', function (event) {
        event.preventDefault();
        let productName = document.querySelector('#productName').value;
        let productQuantity = (document.querySelector('#productQuantity').value);
        let productPrice = (document.querySelector('#productPrice').value);

        document.querySelector('#add-cart-error').innerText = addToCart(cart, productName, productQuantity, productPrice);
        document.querySelector('#productName').value = '';
        document.querySelector('#productQuantity').value = '';
        document.querySelector('#productPrice').value = '';

        updateCartDetailsDom(cart);
    });

    document.querySelector('#removeProductForm').addEventListener('submit', function (event) {
        event.preventDefault();
        let productName = document.querySelector('#removeProductName').value;
        document.querySelector('#remove-cart-error').innerText = removeFromCart(cart, productName);
        document.querySelector('#removeProductName').value = '';

        updateCartDetailsDom(cart);
    });

    document.querySelector('#couponForm').addEventListener('submit', function (event) {
        event.preventDefault();
        let couponCode = document.querySelector('#couponCode').value;
        coupon = applyCoupon(couponCode);

        updateCartDetailsDom(cart);
        document.querySelector('#couponCode').value = '';
    });
</script>
<style>
    .error {
        color: red;
        padding: 10px;
        display: inline-block;
    }

    body {
        padding: 10px;
    }
</style>
</body>
</html>
